//**************************************************************************************************
// @Module  GPIO
//! \file   gpio_drv_wku.c
//! \brief  This file contains wake up service routine for GPIO driver.
//!
//! \par    Abbreviations
//!                 GPIO - General Purpose Input/Output
//!
//!
//! \par    History
//! | Date       | Version | Author | Comment
//! |:----------:|:-------:|:------:|---------------------------------------------------------------
//! | 08.05.2023 |  1.0.0  |  CAV   | First release.
//**************************************************************************************************



//**************************************************************************************************
// Project Includes
//**************************************************************************************************

//! Native header
#include "gpio_drv.h"

//! GPIO IRQ realization
#include "gpio_drv_wku.h"

//! Get MCU registers definitions
#include "derivative_cfg.h"



//**************************************************************************************************
// Verification of the imported configuration parameters
//**************************************************************************************************

// None.



//**************************************************************************************************
// Definitions of global (public) variables
//**************************************************************************************************

// None.



//**************************************************************************************************
// Declarations of local (private) data types
//**************************************************************************************************

// None.



//**************************************************************************************************
// Definitions of local (private) constants
//**************************************************************************************************




//**************************************************************************************************
// Definitions of static global (private) variables
//**************************************************************************************************

// None.



//**************************************************************************************************
// Declarations of local (private) functions
//**************************************************************************************************

// None.



//**************************************************************************************************
//==================================================================================================
// Definitions of global (public) functions
//==================================================================================================

//**************************************************************************************************
//! GPIO Wake Up interrupt service routine
//!
//! \note None
//!
//! \param None
//!
//! \return None
//**************************************************************************************************
INTERRUPT void GPIO_WKU_Handler(void)
{
    U8 nPinNumber = 0U;
    // Find interrupt pin
    while (FALSE == (WKU.PFR.R & (1U << nPinNumber)))
    {
        nPinNumber++;
    }
    // Clear WKU pin interrupt flag
    WKU.PFR.R = 1U << nPinNumber;
    // Call high-level WKU ISR
    GPIO_HighLevel_Wakeup_ISR(0U, nPinNumber);
} // end of GPIO_WKU_Handler()



//**************************************************************************************************
//==================================================================================================
// Definitions of local (private) functions
//==================================================================================================
//**************************************************************************************************

// None



//****************************************** end of file *******************************************
